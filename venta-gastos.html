<!DOCTYPE html>
<html lang="es">

  <head>
    <style>
      /* Mejoras visuales para la sección de ventas, respetando el diseño y colores */
      #venta-screen {
        max-width: 980px;
        margin: 0 auto;
        padding: 0 12px;
      }
      .search-section,
      .category-filters,
      .add-product-card,
      .products-section {
        margin-bottom: 22px;
        background: #23232b;
        border-radius: 18px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        padding: 16px 18px;
      }
      .section-title {
        margin-bottom: 16px;
      }
      .products-grid {
        gap: 18px;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      }
      @media (max-width: 700px) {
        #venta-screen {
          padding: 0 4px;
        }
        .search-section,
        .category-filters,
        .add-product-card,
        .products-section {
          padding: 10px 6px;
        }
        .products-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Venta y Gastos - App Inventario</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/venta-gastos.css">
    <style>
      .btn-primary {
        background: linear-gradient(90deg, #ff8c00 0%, #ffb347 100%);
        color: #fffde8;
        border: none;
        border-radius: 12px;
        padding: 12px 28px;
        font-size: 1.08rem;
        font-weight: 700;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 10px;
        box-shadow: 0 4px 16px rgba(255,140,0,0.12);
        transition: background 0.2s, box-shadow 0.2s, transform 0.1s;
        letter-spacing: 0.5px;
        outline: none;
      }
      .btn-primary:active {
        transform: scale(0.98);
      }
      .btn-primary:hover, .btn-primary:focus {
        background: linear-gradient(90deg, #ffb347 0%, #ff8c00 100%);
        box-shadow: 0 8px 24px rgba(255,140,0,0.18);
        transform: translateY(-2px) scale(1.04);
      }
      .btn-danger {
        background: linear-gradient(90deg, #e53e3e 0%, #ff6b6b 100%);
        color: #fffde8;
        border: none;
        border-radius: 12px;
        padding: 12px 28px;
        font-size: 1.08rem;
        font-weight: 700;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 10px;
        box-shadow: 0 4px 16px rgba(229,62,62,0.12);
        transition: background 0.2s, box-shadow 0.2s, transform 0.1s;
        letter-spacing: 0.5px;
        outline: none;
      }
      .btn-danger:active {
        transform: scale(0.98);
      }
      .btn-danger:hover, .btn-danger:focus {
        background: linear-gradient(90deg, #ff6b6b 0%, #e53e3e 100%);
        box-shadow: 0 8px 24px rgba(229,62,62,0.18);
        transform: translateY(-2px) scale(1.04);
      }
    </style>
  </head>
  <body class="dark-mode">
    <!-- ...existing code... -->
  </body>
    <div id="venta-screen" class="screen active">
      <!-- Buscador de productos -->
      <div style="margin-top: 1%;" class="search-section">
        <div class="search-container" id="search-container" style="display: flex; align-items: center; gap: 0.75rem; background: #23232b; border-radius: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); padding: 8px 16px; margin-bottom: 8px;">
          <div class="search-input-wrapper" style="position: relative; flex: 1;">
            <svg class="search-icon" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#ff8c00" stroke-width="2" style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); pointer-events: none;">
              <circle cx="11" cy="11" r="8"/>
              <path d="m21 21-4.35-4.35"/>
            </svg>
            <input 
              type="text" 
              class="search-input" 
              id="product-search"
              placeholder="Buscar por nombre o código de barras..."
              autocomplete="off"
              style="width: 100%; padding: 10px 44px 10px 40px; border-radius: 10px; border: 1.5px solid #444; background: #18181f; color: #fffde8; font-size: 1.08rem; font-family: 'Inter', sans-serif; box-shadow: 0 2px 8px rgba(0,0,0,0.04); outline: none; transition: border 0.2s;"
            >
            <button class="search-clear" id="search-clear" style="display: none; position: absolute; right: 12px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; padding: 0;">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#ff8c00" stroke-width="2">
                <line x1="18" y1="6" x2="6" y2="18"/>
                <line x1="6" y1="6" x2="18" y2="18"/>
              </svg>
            </button>
          </div>
          <button class="barcode-btn" id="barcode-btn" title="Escanear código de barras" style="flex: none; height: 40px; width: 40px; display: flex; align-items: center; justify-content: center; background: var(--primary-orange); border-radius: 50%; color: white; font-size: 1.3rem; border: none; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.08); transition: background 0.2s;">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
              <path d="M3 7V5a2 2 0 0 1 2-2h2M17 3h2a2 2 0 0 1 2 2v2M21 17v2a2 2 0 0 1-2 2h-2M7 21H5a2 2 0 0 1-2-2v-2"/>
              <path d="M7 8h.01M7 12h.01M7 16h.01M11 8h.01M11 12h.01M11 16h.01M15 8h.01M15 12h.01M15 16h.01"/>
            </svg>
          </button>
        </div>
        <div class="search-suggestions" id="search-suggestions"></div>
      </div>

      <!-- Filtros de categoría -->
      <div class="category-filters">
        <h3 class="filters-title">Categoría</h3>
        <div class="custom-dropdown" id="category-dropdown">
          <button class="dropdown-toggle" id="dropdown-toggle" style="width: 100%; background: #23232b; color: #fffde8; border: 1px solid #444; border-radius: 12px; padding: 12px 18px; font-size: 1rem; display: flex; align-items: center; justify-content: space-between; cursor: pointer;">
            <span id="selected-category-label">Todos</span>
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6"/></svg>
          </button>
          <div class="dropdown-menu" id="dropdown-menu" style="display: none; position: absolute; width: 100%; background: #23232b; border: 1px solid #444; border-radius: 12px; margin-top: 6px; z-index: 10; box-shadow: 0 4px 16px rgba(0,0,0,0.18);">
            <div class="dropdown-item" data-category="all" style="display: flex; align-items: center; gap: 10px; padding: 12px 18px; cursor: pointer;">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 3h18v18H3zM9 9h6v6H9z"/></svg>
              <span>Todos</span>
            </div>
            <div class="dropdown-item" data-category="bebidas" style="display: flex; align-items: center; gap: 10px; padding: 12px 18px; cursor: pointer;">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12V7a1 1 0 0 1 1-1h4l2-2h6a1 1 0 0 1 1 1v7M5 12l6-6M5 12l-2 5h18l-2-5"/></svg>
              <span>Bebidas</span>
            </div>
            <div class="dropdown-item" data-category="comida" style="display: flex; align-items: center; gap: 10px; padding: 12px 18px; cursor: pointer;">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z"/></svg>
              <span>Comida</span>
            </div>
            <div class="dropdown-item" data-category="limpieza" style="display: flex; align-items: center; gap: 10px; padding: 12px 18px; cursor: pointer;">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
              <span>Limpieza</span>
            </div>
          </div>
        </div>
      </div>
      <style>
        .custom-dropdown { position: relative; }
        .dropdown-toggle:focus { outline: 2px solid #ff8c00; }
        .dropdown-menu { animation: fadeIn 0.2s; }
        .dropdown-item:hover { background: #18181f; color: #ff8c00; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
      </style>

      <!-- Card para agregar producto -->
      <div class="add-product-card" id="add-product-card">
        <div style="display: flex;justify-content: space-between;align-items: center;" class="add-product-content">
          <div class="add-product-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
              <path d="M12 5v14M5 12h14"/>
            </svg>
          </div>
          <div class="add-product-text">
            <div class="add-product-title">Crear Nuevo Producto</div>
            <div class="add-product-subtitle">Agrega productos rápidamente al inventario</div>
          </div>
        </div>
      </div>

      <!-- Lista de productos -->
      <div class="products-section">
        <h3 class="section-title">
          Productos Disponibles
          <span class="product-counter" id="product-counter">8</span>
        </h3>
        
        <div class="products-grid" id="products-grid">
          <!-- Productos se generarán dinámicamente -->
        </div>
      </div>
    </div>

    <!-- PANTALLA DE GASTOS -->
    <div id="gastos-screen" class="screen">
      <!-- Filtros de categoría para gastos -->
      <div class="category-filters">
        <h3 class="filters-title">Categorías de Gastos</h3>
        <div class="category-grid">
          <div class="category-filter active" data-category="all">
            <div class="category-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 3h18v18H3zM9 9h6v6H9z"/>
              </svg>
            </div>
            <div class="category-name">Todos</div>
          </div>
          <div class="category-filter" data-category="servicios">
            <div class="category-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>
              </svg>
            </div>
            <div class="category-name">Servicios</div>
          </div>
          <div class="category-filter" data-category="suministros">
            <div class="category-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
              </svg>
            </div>
            <div class="category-name">Suministros</div>
          </div>
          <div class="category-filter" data-category="otros">
            <div class="category-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="1"/>
                <circle cx="19" cy="12" r="1"/>
                <circle cx="5" cy="12" r="1"/>
              </svg>
            </div>
            <div class="category-name">Otros</div>
          </div>
        </div>
      </div>

      <!-- Card para agregar gasto -->
      <div class="add-product-card add-expense-card" id="add-expense-card">
        <div class="add-product-content">
          <div class="add-product-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
              <path d="M12 5v14M5 12h14"/>
            </svg>
          </div>
          <div class="add-product-text">
            <div class="add-product-title">Registrar Nuevo Gasto</div>
            <div class="add-product-subtitle">Agrega gastos y controla tus egresos</div>
          </div>
        </div>
      </div>

      <!-- Lista de gastos recientes -->
      <div class="products-section">
        <h3 class="section-title">
          Gastos Recientes
          <span class="product-counter" id="expenses-counter">5</span>
        </h3>
        
        <div class="products-grid" id="expenses-grid">
          <!-- Gastos se generarán dinámicamente -->
        </div>
      </div>
    </div>
  </div>

  <!-- Botón toggle del carrito -->
  <button class="cart-toggle" id="cart-toggle" style="position: fixed; bottom: 32px; right: 32px; z-index: 10001; background: linear-gradient(90deg, #ff8c00 0%, #ffb347 100%); color: #fffde8; border: none; border-radius: 50%; width: 56px; height: 56px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 16px rgba(255,140,0,0.12); cursor: pointer;">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M9 22V12h6v10M9 12L4.91 4.91a2.78 2.78 0 0 1 .49-3.4 2.78 2.78 0 0 1 3.4.49L19.09 12"/>
    </svg>
    <span class="cart-badge" id="cart-badge" style="display: none;">0</span>
  </button>

  <!-- Carrito flotante -->
  <div class="cart-summary" id="cart-summary">
    <div class="cart-header" style="display: flex;justify-content: space-between;">
      <h3 class="cart-title">Carrito de Venta</h3>
      <button style="font-weight: bold;color: #8f8f8f;" class="cart-close" id="cart-close">&times;</button>
    </div>
    
    <div class="cart-items" id="cart-items">
      <!-- Items del carrito se generarán dinámicamente -->
    </div>
    
    <div class="cart-total">
      <div class="cart-total-amount">
        <span>Total:</span>
        <span id="cart-total-amount">$0</span>
      </div>
    </div>
    
    <div class="cart-actions" style="display: inline-flex;">
      <button class="btn-primary" id="process-transaction">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 12l2 2 4-4"/>
        </svg>
        Procesar Venta
      </button>
      <button class="btn-danger" id="clear-cart">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6l-1 14H6L5 6"/>
        </svg>
        Limpiar Carrito
      </button>
    </div>
  </div>


  <!-- Botón y panel de ventas de la caja -->
  <button class="cart-toggle sales-toggle" id="sales-toggle" style="position: fixed; bottom: 100px; right: 32px; z-index: 10001; background: linear-gradient(90deg, #00b894 0%, #00cec9 100%); color: #fffde8; border: none; border-radius: 50%; width: 56px; height: 56px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 16px rgba(0,190,148,0.12); cursor: pointer;">
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M3 3h18v6H3z"/>
      <path d="M3 9h18v12H3z"/>
      <path d="M8 21V9"/>
      <path d="M16 21V9"/>
    </svg>
  </button>
  <div class="sales-summary" id="sales-summary" style="position: fixed; bottom: 180px; right: 22px; z-index: 10002; background: #23232b; border-radius: 18px; box-shadow: 0 2px 8px rgba(0,0,0,0.18); width: 340px; max-width: 95vw; max-height: 60vh; overflow-y: auto; padding: 22px 18px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
      <h3 style="color: #00cec9; font-size: 1.2rem;">Ventas de la Caja</h3>
      <button id="sales-close" style="background: none; border: none; color: #8f8f8f; font-size: 1.6rem; font-weight: bold; cursor: pointer;">&times;</button>
    </div>
    <div id="sales-list">
      <!-- Aquí se mostrarán las ventas de la caja -->
      <div style="color: #fffde8; text-align: center;">Cargando ventas...</div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="js/venta-gastos.js?asd=asd"></script>
  <style>
    .add-cart-row {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 8px;
    }
    .add-cart-qty {
      width: 56px;
      padding: 4px 8px;
      border-radius: 8px;
      border: 1px solid #444;
      background: #18181f;
      color: #fffde8;
      font-size: 1rem;
      text-align: center;
    }
    .add-cart-btn {
      background: #ff8c00;
      color: #fffde8;
      border: none;
      border-radius: 8px;
      padding: 6px 16px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: background 0.2s;
    }
    .add-cart-btn:disabled {
      background: #888;
      color: #ccc;
      cursor: not-allowed;
    }
    .cart-card {
      background: #23232b;
      border-radius: 14px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      margin-bottom: 14px;
      padding: 12px 16px;
      display: flex;
      align-items: center;
      transition: box-shadow 0.2s;
    }
    .cart-card:hover {
      box-shadow: 0 4px 16px rgba(0,0,0,0.16);
    }
    .cart-info {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .cart-title-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 1.05rem;
      font-weight: 600;
      color: #fffde8;
    }
    .cart-item-name {
      font-size: 1.05rem;
      font-weight: 600;
      color: #fffde8;
    }
    .cart-item-price {
      font-size: 1.05rem;
      font-weight: 600;
      color: #ff8c00;
    }
    .cart-details-row {
      display: flex;
      gap: 18px;
      align-items: center;
      font-size: 0.95rem;
      color: #b4b4b4;
    }
    .cart-item-qty {
      color: #10b981;
      font-weight: 500;
    }
    .cart-item-unit {
      color: #ff8c00;
      font-weight: 500;
    }
  </style>
  <style>
    .product-card-horizontal {
      display: flex;
      align-items: center;
      background: #18181f;
      border-radius: 18px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.12);
      margin-bottom: 18px;
      padding: 14px 18px;
      transition: box-shadow 0.2s;
    }
    .product-card-horizontal:hover {
      box-shadow: 0 4px 16px rgba(0,0,0,0.16);
    }
    .product-img-wrap {
      flex: 0 0 64px;
      width: 64px;
      height: 64px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 18px;
    }
    .product-img-rounded {
      width: 60px;
      height: 60px;
      object-fit: cover;
      border-radius: 50%;
      border: 2px solid #ff8c00;
      background: #18181f;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    .product-info-horizontal {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .product-title-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 1.1rem;
      font-weight: 600;
      color: #fffde8;
    }
    .product-name-h {
      font-size: 1.1rem;
      font-weight: 600;
      color: #fffde8;
    }
    .product-price-h {
      font-size: 1.1rem;
      font-weight: 600;
      color: #ff8c00;
    }
    .product-details-row {
      display: flex;
      gap: 18px;
      align-items: center;
      font-size: 0.95rem;
      color: #b4b4b4;
    }
    .product-stock-h {
      color: #10b981;
      font-weight: 500;
    }
    .product-category-h {
      color: #ff8c00;
      font-weight: 500;
    }
    .product-status-h {
      padding: 2px 10px;
      border-radius: 8px;
      background: #444;
      color: #fff;
      font-size: 0.85rem;
      font-weight: 500;
    }
    .product-status-h.available {
      background: #10b981;
      color: #fffde8;
    }
    .img-placeholder.product-img-rounded {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: #18181f;
      color: #b4b4b4;
      font-size: 0.9rem;
      border: 2px solid #ff8c00;
    }
  </style>
</body>
</html>